{"version":3,"sources":["../../../../assets/scripts/assets/scripts/Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/scripts","sourcesContent":["//import data from './mock';\nimport data from './mock';\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Game extends cc.Component {\n//----------START Layer---------------------- BEGIN\n    @property(cc.Node)\n    nodeTitle: cc.Node = null;\n    @property(cc.Node)\n    nodeLogo: cc.Node = null;\n    @property(cc.Node)\n    btnQa1: cc.Node = null;\n    @property(cc.Node)\n    btnQa2: cc.Node = null;\n    @property(cc.Node)\n    btnQa3: cc.Node = null;\n    @property(cc.Node)\n    btnQa4: cc.Node = null;\n    @property(cc.Node)\n    btnQa5: cc.Node = null;\n    @property(cc.Node)\n    btnQa6: cc.Node = null;\n    @property(cc.Node)\n    btnQa7: cc.Node = null;\n    currentQaNode: cc.Node = null; \n    btnQaNodeArray: Array<cc.Node> = new Array<cc.Node>();\n//----------START Layer---------------------- END\n\n\n    @property(cc.Node)\n    mark: cc.Node = null; // 第 ？题 \n\n    @property(cc.Node)\n    nodeQa: cc.Node = null;\n\n    @property(cc.Node)\n    progressBarNode: cc.Node = null; // 进度条\n\n    @property(cc.Node)\n    readyCountdownNode: cc.Node = null; // ready go 倒计时\n\n    @property(cc.Node)\n    sealNode: cc.Node = null; // 海豹\n\n    @property(cc.Node)\n    nodeStart: cc.Node = null; // 开始游戏界面\n\n    @property(cc.AudioClip)\n    countdownAudio_1: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    countdownAudio_2: cc.AudioClip = null;\n\n    @property(cc.Integer)\n    countdownTime: number = 0; // 小题 答题倒计时(s)\n\n    //@property(cc.Integer)\n\n    questionTotal: number = 10; // 题目数量\n\n    progressBar: cc.ProgressBar = null;\n    readyCountdown: cc.Label = null;\n\n    currentTime: number = 0;    // 小题 答题使用时间(s)\n    roundSchedule: cc.Scheduler; // 小题 答题计时器\n\n    current: number = 0;  // 当前小题\n\n    inProgress: boolean = false; // 是否在进行中 (小题)\n\n    qdata: Array<any> = null;\n\n    isMockData: boolean = true;  // mock.ts数据\n\n    sealAnime: cc.Animation = null;\n\n    onLoad() {\n        this.initStartLayer();\n        this.initGameLayer();\n    }\n\n    initStartLayer():void {\n        // Logo fade in fade Out\n        const action = cc.sequence(cc.fadeIn(1.8), cc.fadeOut(2.0), cc.callFunc(() => { \n            this.nodeTitle.active = false;\n        }));\n\n\n        this.nodeLogo.runAction(action);\n\n        this.btnQaNodeArray = [\n            this.btnQa1,\n            this.btnQa2,\n            this.btnQa3,\n            this.btnQa4,\n            this.btnQa5,\n            this.btnQa6,\n            this.btnQa7\n        ]\n    }\n\n    qaClick(event, option): void {\n        this.currentQaNode = this.btnQaNodeArray[option];\n        console.log(\"######### Label \" + Number(this.getChildrenLabel(this.currentQaNode).string);\n        this.questionTotal = Number(this.getChildrenLabel(this.currentQaNode).string);\n        console.log(\"######### questionTotal \" + this.questionTotal);\n        this.createQaData();\n        \n        this.startGame();\n    }\n\n    createQaData():void {\n        this.qdata = new Array<any>();\n       \n        for(var i = 0; i <= this.questionTotal; i++)\n        {\n            var a = i%3 + 1;\n            var b = this.randomInt(1, 8 - a);\n\n            let q = {\n                    id: a + b,\n                    qa: a + \" + \" +  b ,\n            };\n            this.qdata.push(q);\n        }\n    }\n\n    requestData(): void {\n        var oReq = new XMLHttpRequest();\n        oReq.onload = () => {\n            const res = JSON.parse(oReq.responseText);\n            if (res.status == 0) {\n                this.qdata = new Array<any>();\n                res.result.list.every((item, i) => {\n                    if ((item.answer === 'A' \n                        || item.answer === 'B' \n                        || item.answer === 'C' \n                        || item.answer === 'D'\n                        || item.answer === 'E'\n                        || item.answer === 'F'\n                        || item.answer === 'G'\n                        || item.answer === 'H'\n                        || item.answer === 'I') && !item.pic) {\n                        // if (item.pic) {\n                        let q = {\n                            id: i,\n                            title: item.question,\n                            right: item.answer,\n                            pic: item.pic,\n                            answer: [\n                                {\n                                    id: 'A',\n                                    txt: item.option1\n                                },\n                                {\n                                    id: 'B',\n                                    txt: item.option2\n                                },\n                                {\n                                    id: 'C',\n                                    txt: item.option3\n                                },\n                                {\n                                    id: 'D',\n                                    txt: item.option4\n                                },\n                                {\n                                    id: 'E',\n                                    txt: item.option5\n                                },\n                                {\n                                    id: 'F',\n                                    txt: item.option6\n                                },\n                                {\n                                    id: 'G',\n                                    txt: item.option7\n                                },\n                                {\n                                    id: 'H',\n                                    txt: item.option8\n                                },\n                                {\n                                    id: 'I',\n                                    txt: item.option9\n                                },\n                            ]\n                        };\n                        this.qdata.push(q);\n                        if (this.qdata.length >= this.questionTotal) {\n                            return false;\n                        }\n                    }\n                    return true;\n                });\n                console.log(this.qdata);\n            }\n            \n        };\n        // https://jisujiakao.market.alicloudapi.com\n        oReq.open('get', 'https://jisujiakao.market.alicloudapi.com/driverexam/query?pagenum=1&pagesize=100&sort=rand&subject=1&type=C1', true);\n        oReq.setRequestHeader('Authorization', 'APPCODE d1f7d1f2048841eca46b1a56a941554b');\n        console.log(oReq.send());\n    }\n\n    initGameLayer(): void {\n        // init progressBar\n        this.progressBarNode.active = false;\n        this.progressBar = this.progressBarNode.getComponent(cc.ProgressBar);\n        this.progressBar.progress = 1;\n        // init readyCountdown\n        this.readyCountdownNode.active = false;\n        this.readyCountdown = this.readyCountdownNode.getComponent(cc.Label);\n        // init qa node\n        this.nodeQa.active = false;\n        this.nodeQa.opacity = 0;\n        // init btnStart\n        this.nodeStart.active = true;\n        // init current\n        this.current = 0;\n        // init mark\n        this.mark.active = false;\n    }\n\n    ready(): void {\n        let startCountingDown: number = 2;\n        // enable readyCountdown\n        this.readyCountdownNode.active = true;\n\n        this.sealNode.active = true;\n\n        this.sealAnime = this.sealNode.getComponent(cc.Animation);\n\n        // 最初のアニメーションを再生\n        this.playSealAnimeJump();\n        this.readyCountdown.string = 'Ready';\n        const action = cc.sequence(cc.scaleTo(.2, 1.6), cc.scaleTo(.6, .8)); // 倒计时 action\n        const actionEnd = cc.sequence(cc.scaleTo(.2, 1.6), cc.callFunc(() => { // 倒计时 GO action\n            console.log('anim end!');\n            setTimeout(() => {\n                // 记录初始位置\n                const { x, y } = this.readyCountdownNode.position;\n                this.readyCountdownNode.runAction(cc.sequence(cc.moveTo(.5, 0, 1000), cc.callFunc(() => {\n                    // 复位\n                    this.readyCountdownNode.active = false;\n                    this.readyCountdownNode.x = x;\n                    this.readyCountdownNode.y = y;\n                    this.readyCountdownNode.scale = 1;\n                    // 激活进度条\n                    this.progressBarNode.active = true;\n                    // 激活问答\n                    this.nodeQa.active = true;\n                    // 开始游戏\n                    this.starRound();\n                })));\n            }, 300)\n        }));\n        this.readyCountdownNode.runAction(action);\n        this.schedule(() => {\n            // console.log(startCountingDown);\n            if (startCountingDown <= 0) {\n                this.readyCountdown.string = 'Go';\n                this.readyCountdownNode.runAction(actionEnd);\n                return;\n            }\n            this.readyCountdown.string = startCountingDown.toString();\n            this.readyCountdownNode.runAction(action);\n            startCountingDown -= 1;\n        }, 1, startCountingDown, 0);\n        this.scheduleOnce(() => {\n            cc.audioEngine.play(this.countdownAudio_1 as any, false, 1);\n        }, 1)\n    }\n\n    startGame(): void {\n        this.nodeStart.active = false;\n        this.ready();\n    }\n\n    starRound(): void {\n        console.log(\"######### this.current \" + this.current);\n        console.log(\"######### his.qdata.length \" + this.qdata.length);\n        this.playSealAnimeIdle();\n        if (this.current >= this.questionTotal) {\n            //cc.director.loadScene(\"Result\");\n            this.initGameLayer();\n            this.unschedule(this.updateCountdownTime);\n            // unbind scedule\n            return;\n        }\n\n        this.mark.active = true;\n        this.mark.getComponent(cc.Label).string = `第 ${this.current + 1} 题`\n        this.mark.runAction(cc.sequence(cc.scaleTo(.2, 1.2), cc.scaleTo(.2, 1), cc.callFunc(() => {\n            this.scheduleOnce(() => {\n                this.mark.active = false;\n                // realy start\n                this.nodeQa.runAction(cc.fadeIn(.2));\n                this.inProgress = true; // 回合开始\n                this.nodeQa.getComponent('Qa').initQa(this.qdata[this.current]);\n                this.progressBar.progress = 1;\n                this.schedule(this.updateCountdownTime, 1);\n                this.current += 1;\n            }, 1);\n        })))\n        \n    }\n\n    endRound(): void {\n        this.currentTime = 0;\n        this.inProgress = false;\n        const actionOut = cc.sequence(cc.fadeOut(.2), cc.callFunc(() => {\n            this.nodeQa.getComponent('Qa').resetStatus();\n            this.scheduleOnce(() => {\n                this.starRound();\n            }, .5)\n        }))\n        this.nodeQa.runAction(actionOut);\n       \n    }\n\n    playSealAnimeAway(): void {\n        //this.sealAnime.play('seal_away');\n    }\n\n    playSealAnimeJump(): void {\n        this.sealAnime.play('seal_jump');\n    }\n\n    playSealAnimeIdle(): void {\n        this.sealAnime.play('seal_idle');\n    }\n\n    stopSchedule(): void {\n        this.unschedule(this.updateCountdownTime);\n    }\n\n    updateCountdownTime(): void {\n        this.currentTime += 1;\n        this.progressBar.progress = 1 - this.currentTime / this.countdownTime;\n        // console.log(this.currentTime);\n        cc.audioEngine.play(this.countdownAudio_2 as any, false, 1);\n        if (this.currentTime >= this.countdownTime) {\n            this.unschedule(this.updateCountdownTime);\n            this.endRound();\n        }\n    }\n\n    getChildrenLabel(node: cc.Node): cc.Label {\n        return node.getChildByName('Label').getComponent(cc.Label);\n    }\n\n    /**\n     * generate a random integer between min and max\n     * @param {Number} min \n     * @param {Number} max\n     * @return {Number} random generated integer \n     */\n    randomInt(min, max){\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n\n}\n"]}