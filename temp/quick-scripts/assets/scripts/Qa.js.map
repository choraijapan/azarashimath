{"version":3,"sources":["Qa.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/scripts","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Qa extends cc.Component {\n\n    @property(cc.Node)\n    questionNode: cc.Node = null;\n    @property(cc.Node)\n    btnAnswerNode_1: cc.Node = null;\n    @property(cc.Node)\n    btnAnswerNode_2: cc.Node = null;\n    @property(cc.Node)\n    btnAnswerNode_3: cc.Node = null;\n    @property(cc.Node)\n    btnAnswerNode_4: cc.Node = null;\n    @property(cc.Node)\n    btnAnswerNode_5: cc.Node = null;\n    @property(cc.Node)\n    btnAnswerNode_6: cc.Node = null;\n    @property(cc.Node)\n    btnAnswerNode_7: cc.Node = null;\n    @property(cc.Node)\n    btnAnswerNode_8: cc.Node = null;\n    @property(cc.Node)\n    btnAnswerNode_9: cc.Node = null;\n\n    @property(cc.Node)\n    game: cc.Node = null;\n\n    @property(cc.AudioClip)\n    faildAudio: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    successAudio: cc.AudioClip = null;\n\n    btnAnswerNodeArray: Array<cc.Node> = new Array<cc.Node>();\n\n    currentNode: cc.Node = null; // 选择答案的节点\n    rightNode: cc.Node = null; // 正确答案的节点\n\n    right: number; // 正确答案的id\n    answer: number; // 选择的id\n    isAnswer: boolean; // 是否已经回答了\n\n    onLoad(): void {\n        this.btnAnswerNodeArray = [\n            this.btnAnswerNode_1,\n            this.btnAnswerNode_2,\n            this.btnAnswerNode_3,\n            this.btnAnswerNode_4,\n            this.btnAnswerNode_5,\n            this.btnAnswerNode_6,\n            this.btnAnswerNode_7,\n            this.btnAnswerNode_8,\n            this.btnAnswerNode_9\n        ]\n    }\n\n    getQuestionResult(): number {\n        var questString = this.questionNode.getComponent(cc.Label).string \n        return Number(questString.charAt(0)) + Number(questString.substr(questString.length - 1));\n    }\n\n    answerClick(event, option): void {\n        if (!this.isAnswer && this.game.getComponent('Game').inProgress) {\n            this.isAnswer = true;\n            this.currentNode = this.btnAnswerNodeArray[option];\n\n            console.log(\"######### getQuestionResult \" + this.getQuestionResult());\n            console.log(\"######### Number(option) \" + Number(option));\n            console.log(\"######### Label \" + Number(this.getChildrenLabel(this.currentNode).string);\n\n            // judge\n            //this.answer = Number(option);\n            this.answer = this.getQuestionResult();\n            //if (this.right === Number(option)) {\n            if (this.getQuestionResult() == Number(this.getChildrenLabel(this.currentNode).string)) {\n                this.correct();\n                return;\n            }\n            this.wrong();\n        }\n    }\n\n    initQa(question): void {\n        // init status\n        this.isAnswer = false;\n        // init q & a\n        this.questionNode.getComponent(cc.Label).string = question.qa;\n        //const [A, B, C, D, E, F, G, H, I] = question.answer;\n        //this.getChildrenLabel(this.btnAnswerNode_1).string = `${A.txt}`; // A.\n        //this.getChildrenLabel(this.btnAnswerNode_2).string = `${B.txt}`; // B.\n        //this.getChildrenLabel(this.btnAnswerNode_3).string = `${C.txt}`; // C.\n        //this.getChildrenLabel(this.btnAnswerNode_4).string = `${D.txt}`; // D.\n        //this.getChildrenLabel(this.btnAnswerNode_5).string = `${E.txt}`; // E.\n        //this.getChildrenLabel(this.btnAnswerNode_6).string = `${F.txt}`; // F.\n        //this.getChildrenLabel(this.btnAnswerNode_7).string = `${G.txt}`; // G.\n        //this.getChildrenLabel(this.btnAnswerNode_8).string = `${H.txt}`; // H.\n        //this.getChildrenLabel(this.btnAnswerNode_9).string = `${I.txt}`; // I.\n        // init right\n        //this.right = question.answer.findIndex(item => item.id === question.right);\n        this.right = this.getQuestionResult();\n        // init pic\n        // if (question.pic) {\n        //     this.picNode.active = true;\n        //     this.picNode.getComponent(cc.WebView).url = question.pic;\n        // }\n    }\n\n    correct(): void {\n        this.animStart();\n        cc.audioEngine.play(this.successAudio as any, false, 1);\n        this.currentNode.color = new cc.Color(88, 165, 92);\n        this.game.getComponent('Game').playSealAnimeJump();\n    }\n\n    wrong(): void {\n        this.animStart();\n        cc.audioEngine.play(this.faildAudio as any, false, 1);\n        this.currentNode.color = new cc.Color(217, 80, 84);\n        this.game.getComponent('Game').playSealAnimeAway();\n    }\n\n    animStart(): void {\n        const seqAction = cc.sequence(cc.scaleTo(.2, 1.1), cc.callFunc(this.animOver, this));\n        this.currentNode.runAction(seqAction);\n        const isRight = this.right === this.answer;\n        this.currentNode.getChildByName('Label').color = cc.Color.WHITE;\n        this.rightNode = this.btnAnswerNodeArray[this.right - 1];\n\n\n        this.btnAnswerNodeArray.forEach(node => {\n            if (!isRight && this.rightNode === node) {\n                // 答错了把正确答案也展示给用户\n                node.color = new cc.Color(88, 165, 92);\n                node.getChildByName('Label').color = cc.Color.WHITE;\n                return;\n            }\n            if (this.currentNode !== node) {\n                node.runAction(cc.scaleTo(.2, 0));\n            }\n        })\n\n        \n        if (this.currentNode !== this.rightNode) {\n            this.rightNode.runAction(cc.scaleTo(1.1, 1.1));\n        }\n    }\n\n    animOver(): void {\n        this.game.getComponent('Game').stopSchedule();\n        this.scheduleOnce(() => {\n            this.game.getComponent('Game').endRound();\n        }, 1)\n    }\n\n    resetStatus(): void {\n        if (this.currentNode) {\n            // 将正确答案缩放重置\n            this.currentNode.runAction(cc.scaleTo(1, 1));\n            // 将错误答案和正确答案背景颜色重置\n            this.currentNode.color = cc.Color.WHITE;\n            this.rightNode.color = cc.Color.WHITE;\n            // 将lable颜色重置\n            //this.rightNode.getChildByName('Label').color = cc.Color.BLACK;\n            //this.currentNode.getChildByName('Label').color = cc.Color.BLACK;\n\n            this.btnAnswerNodeArray.forEach(node => {\n                if (this.currentNode !== node) {\n                    node.runAction(cc.scaleTo(1, 1));\n                }\n            })\n            this.currentNode = null;\n        }\n    }\n\n    getChildrenLabel(node: cc.Node): cc.Label {\n        return node.getChildByName('Label').getComponent(cc.Label);\n    }\n\n}\n"]}